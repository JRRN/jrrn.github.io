I"Ï<p>El patr√≥n materialized view, nos sirve para tener datos fragmentados en diferentes tablas en una vista desnormalizada. De esta forma, podemos consultar estos datos y recuperarlos de una manera √≥ptima.</p>

<p>Vayamos al ejemplo para tener clara la situaci√≥n y como este patr√≥n nos ayuda a solucionarlo.</p>

<p>Imaginemos que nuestra aplicaci√≥n tiene la siguiente estrucutura:</p>

<p>TABLA USUARIOS</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">(*) id_user</th>
      <th style="text-align: center">userName</th>
      <th style="text-align: center">userLastName</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Gru√±√≥n</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">Pap√°</td>
      <td style="text-align: center">Pitufo</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Amoroso</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Inteligente</td>
    </tr>
    <tr>
      <td style="text-align: center">5</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Burl√≥n</td>
    </tr>
  </tbody>
</table>

<p>TABLA USUARIO CABELLERA</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">(*) id_cabellera</th>
      <th style="text-align: center">id_user</th>
      <th style="text-align: center">color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">casta√±o</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">2</td>
      <td style="text-align: center">moreno</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">casta√±o</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">4</td>
      <td style="text-align: center">moreno</td>
    </tr>
    <tr>
      <td style="text-align: center">5</td>
      <td style="text-align: center">5</td>
      <td style="text-align: center">casta√±o</td>
    </tr>
  </tbody>
</table>

<p>Si quisieramos obtener el color de pelo de los usuarios der√≠amos hacer una join entre usuarios y cabellera. Imaginemos que, esta consulta fuera muy costosa. La soluci√≥n pasa por tener una vista materializada precalculada, como si fuera una cach√©, con este resultado almacenado y simplemente ejecutar nuestra consulta sobre esta vista:</p>

<p>VISTA USUARIO-CABELLERA</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">(*) id_user</th>
      <th style="text-align: center">userName</th>
      <th style="text-align: center">userLastName</th>
      <th style="text-align: center">id_cabellera</th>
      <th style="text-align: center">color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Gru√±√≥n</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">casta√±o</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">Pap√°</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">2</td>
      <td style="text-align: center">moreno</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Amoroso</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">casta√±o</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Inteligente</td>
      <td style="text-align: center">4</td>
      <td style="text-align: center">moreno</td>
    </tr>
    <tr>
      <td style="text-align: center">5</td>
      <td style="text-align: center">Pitufo</td>
      <td style="text-align: center">Burl√≥n</td>
      <td style="text-align: center">5</td>
      <td style="text-align: center">casta√±o</td>
    </tr>
  </tbody>
</table>

<p>Esta soluci√≥n, nos brinda la capacidad de realizar esta acci√≥n de mejora en datos que no se actualizan con frecuencia. Si por el contrario, estos datos cambian constantemente, esto nos obligar√≠a a recalcular o regenerar las vista y podr√≠a penalizarnos en vez de ayudarnos.</p>

<p>Sin m√°s, hasta la pr√≥xima.</p>
:ET
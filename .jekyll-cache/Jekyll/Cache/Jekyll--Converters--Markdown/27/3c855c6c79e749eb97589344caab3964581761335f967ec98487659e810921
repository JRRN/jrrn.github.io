I"‚<p>Hola a todos. El patr√≥n Valet Key nos ayuda a validar al usuario a la hora de acceder a contenido o recursos que no necesiten una autenticaci√≥n de usuario, es decir, es ofrecer la posibilidad de consumir ciertos datos o recursos a usuarios an√≥nimos que usan nuestra aplicaci√≥n como pasarela para consumirlos.</p>

<p>Vamos con el ejemplo.</p>

<p>Imaginemos que tenemos una api en la que exponemos los resultados de f√∫tbol de la jornada a los usuarios de nuestra aplicaci√≥n. Nuestra aplicaci√≥n front no requiere que el usuario est√© registrado para poder saber los resultados de la jornada. La manera f√°cil, es crear un end point [anonymous] que devuelva estos resultados.</p>

<p>Sin embargo, al realizar esta acci√≥n lo que estamos permitiendo es que cualquiera pueda realizar esta llamada, consumir nuestros servicio y por lo tanto tener un coste mayor de procesamiento ya que el diario deportivo mundial, se ha dado cuenta que este servicio lo puede consumir sin ning√∫n coste adicional y obtener los resultados deportivos. Para nosotros, podr√≠a ser un problema si todos los forofos del f√∫tbol del mundo est√°n pendientes del resultado del partido m√°s importante de la jornada. A final de mes, nos llevariamos una buena torta en la facturaci√≥n de nuestra infraestructura por el coste de las llamadas, el escalado para aguantar el tr√°fico, etc‚Ä¶</p>

<p>Sin embargo, con el patr√≥n valet key, podemos mitigar este desafortunado incidente para nuestro bolsillo.</p>

<p>Valet Key, lo que nos permite desde nuestra aplicaci√≥n front es obtener un key con la que los usuarios an√≥nimos podr√°n acceder al servicio de consulta de los resultados de la jornada, mientras lo realicen por la pasarela de nuestra aplicaci√≥n. Mientras que si la llamada se origina fuera de nuestra aplicaci√≥n, aseguraremos un 401.</p>

<p><img src="/img/cloudpatterns/valet-key.png" alt="Valet Key" title="Valet Key" /></p>

<p>De esta forma, nuestro coste reflejar√° el consumo real de nuestros usuarios.</p>

<p>Adem√°s, dando una vuelta m√°s de tuerca, podremos dar keys que nos den informaci√≥n a nuestras aplicaciones back, para poder clasificar a estos usuarios en roles y seg√∫n su rol, poder dar m√°s o menos privilegios a estos usuario an√≥nimos.</p>

<p>Un saludo.</p>
:ET
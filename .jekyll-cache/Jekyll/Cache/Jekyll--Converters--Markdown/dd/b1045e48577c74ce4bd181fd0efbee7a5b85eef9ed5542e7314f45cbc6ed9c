I"Ué<p>Hola de nuevo. Despu√©s de los principios <a href="./solid.html">SOLID</a>, vamos a dar un pasito m√°s y vamos a tratar de explicar los principios GRASP (General Responsibility Assignment Software Patterns).</p>

<p>GRASP describe 7 patrones que s√≥n:</p>

<ol>
  <li>Alta cohesioÃÅn y bajo acoplamiento</li>
  <li>Controlador</li>
  <li>Creador</li>
  <li>Experto en informacioÃÅn</li>
  <li>FabricacioÃÅn pura</li>
  <li>IndireccioÃÅn</li>
  <li>Polimorfismo</li>
  <li>Variaciones Protegidas</li>
</ol>

<h3 id="1--alta-cohesi√≥n-y-bajo-acoplamiento">1 . Alta cohesi√≥n y bajo acoplamiento</h3>

<p><strong>Alta cohesi√≥n</strong>: es la informaci√≥n que almacena una clase, debe de ser coherente y debe estar relacionada con la clase. Podemos encontrar 7 tipos de cohesioÃÅn:</p>

<ol>
  <li><strong>CohesioÃÅn coincidente</strong>: la clase tiene varios m√©todos sin relaci√≥n entre ellos.</li>
  <li><strong>CohesioÃÅn loÃÅgica</strong>: la clase tiene varios m√©todos relacionados, pero en ejecuci√≥n s√≥lo uno de ellos se utiliza.</li>
  <li><strong>CohesioÃÅn temporal</strong>: la relaci√≥n que tienen los m√©todos de la clase es que se ejecutan simult√°neamente.</li>
  <li><strong>CohesioÃÅn de procedimiento</strong>: la relaci√≥n que tienes lo m√©todos es de la clase es que se ejecutan secuencialmente.</li>
  <li><strong>CohesioÃÅn de comunicacioÃÅn</strong>: la relaci√≥n que tienes lo m√©todos es de la clase es que se ejecutan secuencialmente y afectan a la misma entidad de datos.</li>
  <li><strong>CohesioÃÅn de informacioÃÅn</strong>: los m√©todos de una clase se ejecutan de forma no secuencial, los m√©todos son independientes entre ellos y tratan sobre la misma entidad.</li>
  <li><strong>CohesioÃÅn funcional</strong>: El m√©todo de una clase solo realiza una tarea y solo entiende de una sola entidad.</li>
</ol>

<p><strong>Bajo Acoplamiento</strong>: es la idea de tener las clases lo menos ligadas entre siÃÅ, de esta forma si tuvieramos que modificar alguna de estas clases, el resto no deber√≠a tener ninguna afectaci√≥n al cambio. Tenemos 3 tipos de acoplamiento:</p>

<ol>
  <li><strong>Acoplamiento de contenido</strong>: cuando una clase tiene una referencia directa con otra clase.</li>
  <li><strong>Acoplamiento comuÃÅn</strong>: cuando dos clases acceden y modifican un mismo objeto global.</li>
  <li><strong>Acoplamiento de control</strong>: cuando una clase le enviÃÅa a otra que es lo que debe hacer y como comportarse.</li>
</ol>

<p>Ve√°mos un ejemplo:</p>

<p>Esta clase esta perfecta.</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Saludo</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_to</span><span class="p">;</span> 
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_message</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Mensaje</span><span class="p">(</span><span class="kt">string</span> <span class="n">to</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_to</span> <span class="p">=</span> <span class="n">to</span><span class="p">;</span>
        <span class="n">_message</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Saludar</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// imprime el saludo</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>
<p>Sin embargo recibimos una nueva feature:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Saludo2</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_to</span><span class="p">;</span> 
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_message</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Mensaje</span><span class="p">(</span><span class="kt">string</span> <span class="n">to</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_to</span> <span class="p">=</span> <span class="n">to</span><span class="p">;</span>
        <span class="n">_message</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Saludar</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// imprime el saludo</span>
    <span class="p">}</span> 

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Despedir</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//imprime la despedida</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>No vamos bien, lo suyo ser√≠a:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">ISaluda</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">Saludar</span><span class="p">(</span><span class="kt">string</span> <span class="n">to</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">);</span> 
<span class="p">}</span>
<span class="k">public</span> <span class="k">interface</span> <span class="nc">IDespedida</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">Despedir</span><span class="p">(</span><span class="kt">string</span> <span class="n">to</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">User</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">ISaluda</span> <span class="n">_saluda</span><span class="p">;</span> 
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IDespedida</span> <span class="n">_despedida</span><span class="p">;</span>
    <span class="k">public</span> <span class="nf">User</span><span class="p">(</span><span class="n">ISaluda</span> <span class="n">saluda</span><span class="p">,</span> <span class="n">IDespedida</span> <span class="n">despedida</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_saluda</span> <span class="p">=</span> <span class="n">saluda</span><span class="p">;</span>
        <span class="n">_despedida</span> <span class="p">=</span> <span class="n">despedida</span><span class="p">;</span> 
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Educado</span><span class="p">()</span>
    <span class="p">{</span>   <span class="c1">// Saluda y despedir:</span>
        <span class="n">_saluda</span><span class="p">.</span><span class="nf">Saludar</span><span class="p">(</span><span class="s">"JRRN"</span><span class="p">,</span> <span class="s">"Hola!"</span><span class="p">)</span>
        <span class="n">_despedida</span><span class="p">.</span><span class="nf">Despedir</span><span class="p">(</span><span class="s">"JRRN"</span><span class="p">,</span> <span class="s">"Adi√≥s!"</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-controlador">2. Controlador</h3>

<p>Es el patr√≥n que implementa MVC. Es un patroÃÅn que realiza la funci√≥n de intermediario entre una determinada interfaz y la clase que la implementa. As√≠, es el controlador quien recibe los datos del usuario y quien los enviÃÅa a las distintas clases seguÃÅn el meÃÅtodo que se va usando, teniendo la l√≥gica de negocio controlada y con la capacidad de ser reutilizada.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BookView</span> <span class="p">{</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BookPresenter</span> <span class="p">{</span>
    <span class="n">BookView</span> <span class="n">_vista</span><span class="p">;</span> 
    <span class="n">BookController</span> <span class="n">_controlador</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddTitle</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_controlador</span><span class="p">.</span><span class="nf">AddTitle</span><span class="p">(</span><span class="n">title</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BookController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddTitle</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Con Controlador:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BookView</span> <span class="p">{</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BookPresenter</span> <span class="p">{</span>
    <span class="n">BookView</span> <span class="n">_vista</span><span class="p">;</span> 
    <span class="n">BookController</span> <span class="n">_controlador</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Title</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_controlador</span><span class="p">.</span><span class="nf">AddTitle</span><span class="p">(</span><span class="n">title</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BookController</span> <span class="p">{</span>
    <span class="k">private</span> <span class="n">BookRepository</span> <span class="n">_repository</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddTitle</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">var</span> <span class="n">book</span> <span class="p">=</span> <span class="n">_repository</span><span class="p">.</span><span class="nf">GetById</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>  
        <span class="n">book</span><span class="p">.</span><span class="nf">AddTitle</span><span class="p">(</span><span class="s">"title"</span><span class="p">);</span>
        <span class="n">_repository</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">book</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BookRepository</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">Book</span> <span class="nf">GetById</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">(</span><span class="n">Book</span> <span class="n">book</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Book</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddTitle</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="3-creador">3. Creador</h3>

<p>El patroÃÅn creador nos dice quien es responsable de la creacioÃÅn o quien instancia nuevos objetos y/o clases.</p>

<p>La nueva instancia podraÃÅ ser creada por una clase si:</p>
<ul>
  <li>Contiene o agrega la clase.</li>
  <li>Almacena la instancia en alguÃÅn sitio</li>
  <li>Sabe como crear el objeto (es ‚ÄòExperta‚Äô)</li>
  <li>Usa las instancias creadas del objeto</li>
</ul>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CatalogoPresenter</span>  <span class="p">{</span>
    <span class="n">Catalogo</span> <span class="n">_catalogo_</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">GetLibros</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span> 
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Catalogo</span> <span class="p">{</span>
    <span class="n">List</span><span class="p">&lt;</span><span class="n">Libro</span><span class="p">&gt;</span> <span class="n">_catalogo</span><span class="p">;</span> 
<span class="p">}</span>

<span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">Libro</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Aplicando creador:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CatalogoPresenter</span>
<span class="p">{</span>
    <span class="n">Catalogo</span> <span class="n">_catalogo</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">GetLibros</span><span class="p">()</span> <span class="p">{</span>  <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Catalogo</span> <span class="p">{</span>
    <span class="n">Book</span> <span class="n">_book</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Catalogo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_book</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Book</span><span class="p">();</span> 
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Eliminar</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_book</span><span class="p">.</span><span class="nf">Eliminar</span><span class="p">();</span>  
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Actualizar</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_book</span><span class="p">.</span><span class="nf">Actualizar</span><span class="p">();</span> 
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">Book</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Eliminar</span><span class="p">(){}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Actualizar</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">){}</span> 
<span class="p">}</span>
</code></pre></div></div>

<h3 id="4-experto-en-informacioÃÅn">4. Experto en informacioÃÅn</h3>

<p>La responsabilidad de crear un objeto o su implementacioÃÅn, debe realizarla la clase que sabe toda la informacioÃÅn necesaria para hacerlo, de este modo obtenemos una mayor cohesioÃÅn la informacioÃÅn esta encapsulada disminuyendo el acoplamiento.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Catalogo</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;</span> <span class="n">books</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> 
<span class="p">}</span>
    
<span class="k">public</span> <span class="k">class</span> <span class="nc">View</span> <span class="p">{</span>
    <span class="n">Catalogo</span> <span class="n">_catalogo</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">CalcularTotal</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_catalogo</span><span class="p">.</span><span class="n">books</span><span class="p">.</span><span class="nf">Count</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Aplicando experto en informaci√≥n:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Catalogo</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">Book</span><span class="p">[]</span> <span class="n">_books</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    
    <span class="k">public</span> <span class="k">void</span> <span class="nf">CalcularTotal</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_books</span><span class="p">.</span><span class="nf">Count</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">View</span> <span class="p">{</span>
    <span class="k">private</span> <span class="n">Catalogo</span> <span class="n">_catalogo</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Total</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_catalogo</span><span class="p">.</span><span class="nf">CalcularTotal</span><span class="p">();</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<h3 id="5-fabricacioÃÅn-pura">5. FabricacioÃÅn Pura</h3>

<p>La fabricacioÃÅn pura es la pr√°ctica que ayuda con una clase poco cohesiva y no tiene otra clase donde implementar algunos meÃÅtodos.</p>

<p>Es decir que se crea una clase ‚Äúinventada‚Äù o, pero que al a√±adirla mejora la estrucutura del sistema.</p>

<p>Sin embargo, abusar de este patroÃÅn provoca clases funcioÃÅn o algoritmo -&gt; Clases que tienen un solo meÃÅtodo.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Coche</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Conduce</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Aparca</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>Con fabricaci√≥n pura:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Coche</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Conduce</span><span class="p">()</span> <span class="p">{</span>  <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Automovil</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nf">Automovil</span><span class="p">(</span><span class="n">CocheView</span> <span class="n">view</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">view</span><span class="p">.</span><span class="nf">Aparca</span><span class="p">(</span><span class="k">new</span> <span class="nf">Coche</span><span class="p">());</span> 
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CocheView</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Aparca</span><span class="p">(</span><span class="n">Coche</span> <span class="n">coche</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="6-indireccioÃÅn">6. IndireccioÃÅn</h3>

<p>El patroÃÅn de indireccioÃÅn nos permite mejorar el bajo acoplamiento entre dos clases.</p>

<p>Para ello, se asigna la responsabilidad a una clase que medie entre las otras clases para proteger a unas de los posibles cambios de otras.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">LogThis</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">new</span> <span class="nf">SysLog</span><span class="p">().</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Log this."</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">SysLog</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>Con indirecci√≥n:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Class</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">LogThis</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Logger</span><span class="p">().</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Log this!"</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">new</span> <span class="nf">SysLog</span><span class="p">().</span><span class="nf">Log</span><span class="p">(</span><span class="n">message</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">SysLog</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<h3 id="7-polimorfismo">7. Polimorfismo</h3>

<p>Polimorfismo es permitir que varias clases se comporten de manera distinta dependiendo del tipo que sean.</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">enum</span> <span class="n">ErrorType</span> <span class="p">{</span>
    <span class="n">Info</span><span class="p">,</span>
    <span class="n">Error</span> 
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Log</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Write</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">,</span> <span class="n">ErrorType</span> <span class="n">errorType</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">errorType</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="n">errorType</span><span class="p">.</span><span class="n">Info</span><span class="p">:</span> 
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"[Info];{0}"</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">errorType</span><span class="p">.</span><span class="n">Error</span><span class="p">:</span> 
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"[Error]:{0}"</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span> 
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
    <span class="n">Log</span> <span class="n">_log</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">WriteLog</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">_log</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Error."</span><span class="p">,</span> <span class="n">TipoDeLog</span><span class="p">.</span><span class="n">Error</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Y con polimorfismo:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">ILogMessage</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="n">Value</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Error</span> <span class="p">:</span> <span class="n">ILogMessage</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">_message</span><span class="p">;</span>
    
    <span class="k">public</span> <span class="nf">Error</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_message</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span> 
    <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Value</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">"[Error];{0}"</span><span class="p">,</span> <span class="n">_message</span><span class="p">);</span>
        <span class="p">}</span> 
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Info</span> <span class="p">:</span> <span class="n">ILogMessage</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">_message</span><span class="p">;</span>
    
    <span class="k">public</span> <span class="nf">Info</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_message</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span> 
    <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Value</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">"[Info];{0}"</span><span class="p">,</span> <span class="n">_message</span><span class="p">);</span>
        <span class="p">}</span> 
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Log</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Write</span><span class="p">(</span><span class="n">IMensajeDelLog</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">Valor</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
    <span class="n">Log</span> <span class="n">_log</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Error</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_log</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="k">new</span> <span class="nf">Error</span><span class="p">(</span><span class="s">"Error"</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Info</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_log</span><span class="p">.</span><span class="nf">Registrar</span><span class="p">(</span><span class="k">new</span> <span class="nf">Info</span><span class="p">(</span><span class="s">"Info"</span><span class="p">));</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<h3 id="8-variaciones-protegidas">8. Variaciones protegidas</h3>

<p>Variaciones protegidas, es el principio fundamental de protegerse frente a nuevos requisitos.</p>

<p>As√≠ lo que podamos ver en un an√°lisis previo y sea susceptible a modificaciones lo extraeremos a una interfaz para crear varias implementaciones y extender nuestro c√≥digo todo lo posible sin que nuestro c√≥digo sufra por la cohesi√≥n y el acoplamiento.</p>

<p>De eÃÅsta forma, si nos entra un nuevo requisito, este debe repercutir lo m√≠nimo. Este principio introduce el polimorfismo y la indireccioÃÅn.</p>

<p>Tenemos una clase que cambia la calidad de MP3.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Mp3</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Convert</span><span class="p">(</span><span class="kt">int</span> <span class="n">quality</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Convert</span>
    <span class="p">}</span> 
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">QualitySongController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">ConvertirCalidad</span><span class="p">(</span><span class="n">Mp3</span> <span class="n">song</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">song</span><span class="p">.</span><span class="nf">Convert</span><span class="p">(</span><span class="m">128</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Ahora nos piden que soporte cualquier formato de imagen:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">ISong</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">Convert</span><span class="p">(</span><span class="kt">int</span> <span class="n">quality</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Mp3</span> <span class="p">:</span> <span class="n">ISong</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Convert</span><span class="p">(</span><span class="kt">int</span> <span class="n">nuevoAlto</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Convert</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Ogg</span> <span class="p">:</span> <span class="n">ISong</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Convert</span><span class="p">(</span><span class="kt">int</span> <span class="n">nuevoAlto</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Convert</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">MostrarImagenController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">ConvertirCalidad</span><span class="p">(</span><span class="n">ISong</span> <span class="n">song</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">song</span><span class="p">.</span><span class="nf">Convert</span><span class="p">(</span><span class="m">128</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Saludos!</p>
:ET
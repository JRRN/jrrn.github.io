<!DOCTYPE html>
<html lang="es">

<head>
	<!-- Meta -->
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="generator" content="Jekyll">

	<title>Patrón Memento</title>
	<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Patrón Memento | JRRN Coding!</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="Patrón Memento" />
<meta name="author" content="JRRN" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="El patrón memento previene en la encapsulación de un objeto el estado en que se encuentra en cada momento. De esta forma, si por algún motivo, necesitamos hacer un rollback de estos cambios del objeto, podamos restaurar sin romper nada." />
<meta property="og:description" content="El patrón memento previene en la encapsulación de un objeto el estado en que se encuentra en cada momento. De esta forma, si por algún motivo, necesitamos hacer un rollback de estos cambios del objeto, podamos restaurar sin romper nada." />
<link rel="canonical" href="http://localhost:4000/patron-memento" />
<meta property="og:url" content="http://localhost:4000/patron-memento" />
<meta property="og:site_name" content="JRRN Coding!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-25T00:00:00+02:00" />
<script type="application/ld+json">
{"description":"El patrón memento previene en la encapsulación de un objeto el estado en que se encuentra en cada momento. De esta forma, si por algún motivo, necesitamos hacer un rollback de estos cambios del objeto, podamos restaurar sin romper nada.","author":{"@type":"Person","name":"JRRN"},"@type":"BlogPosting","url":"http://localhost:4000/patron-memento","headline":"Patrón Memento","dateModified":"2018-07-25T00:00:00+02:00","datePublished":"2018-07-25T00:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/patron-memento"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

	<link rel="shortcut icon" href="img/icons/favicon.ico">
	<!-- RSS -->
	<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />
	
	





  	
</head>


<body>
	<div id="wrap">
	  	<!-- Navigation -->
	  	<nav id="nav">
	<div id="nav-list">
		<a href="/">Home</a>
		<!-- Nav pages -->
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	      <a href="/about" title="Sobre mí">Sobre mí</a>
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
    <!-- Nav links -->
	  <!-- <a href="https://github.com/KingFelix/emerald/archive/master.zip">Download</a>
<a href="https://github.com/KingFelix/emerald">Project on Github</a> -->



	</div>
  
  <!-- Nav footer -->
	
	  <span>version 1.0.0</span>





	

</nav>

    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>
      <!-- Header -->
        <header id="header">
	<div class="headerbackground"></div>
	<a href="/">
	  <h1>JRRN Coding!</h1>
	</a>
</header>

    <!-- Main content -->
	  <div id="container">
      <div class="row">
        <div class="col-md-2 col-lg-2"></div>
        <div class="col-md-7 col-lg-7">
          <main>
            <article id="post-page">
	<div>
		<h2>Patrón Memento</h2><span>[
			
				
				<a href="/tag/Arquitectura"><code class="highligher-rouge"><nobr>Arquitectura<nobr></code>&nbsp;</a>
			
			]</span>	
	<time datetime="2018-07-25T00:00:00+02:00" class="by-line">25 Jul 2018</time>
	</div>
		
	<div class="content">
		<p>El patrón memento previene en la encapsulación de un objeto el estado en que se encuentra en cada momento. De esta forma, si por algún motivo, necesitamos hacer un rollback de estos cambios del objeto, podamos restaurar sin romper nada.</p>

<p>Es como tener un pila de estados de como ha ido cambiando el objeto y si es necesario, poder volver a un punto determinado.</p>

<p>Vamos con la implementación.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">Memento</span> <span class="p">{</span> <span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MementoImplementation</span> <span class="p">:</span> <span class="n">Memento</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;</span> <span class="n">_bookOptions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;</span> <span class="n">State</span>
    <span class="p">{</span>
        <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_bookOptions</span><span class="p">;</span>
        <span class="k">set</span>
        <span class="p">{</span>
            <span class="n">_bookOptions</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="n">OpcionBook</span> <span class="n">bookOption</span> <span class="k">in</span> <span class="k">value</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">_bookOptions</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">bookOption</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CompraOpciones</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;</span> <span class="n">bookOptions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="n">IMemento</span> <span class="nf">AgregaOpciones</span><span class="p">(</span><span class="n">OpcionBook</span> <span class="n">bookOption</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">MementoImplementation</span> <span class="n">result</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MementoImplementation</span><span class="p">();</span>
        <span class="n">result</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="n">bookOptions</span><span class="p">;</span>

        <span class="n">IList</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;</span> <span class="n">bookOptionsNotSupported</span> <span class="p">=</span> <span class="n">bookOption</span><span class="p">.</span><span class="n">BookOptionsNotSupported</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="n">OpcionBook</span> <span class="n">bOption</span> <span class="k">in</span> <span class="n">bookOptionsNotSupported</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">bookOptions</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">bOption</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">bookOptions</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">bookOption</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Anula</span><span class="p">(</span><span class="n">IMemento</span> <span class="n">memento</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!(</span><span class="n">memento</span> <span class="k">is</span> <span class="n">MementoImplementation</span> <span class="n">mementoImplementation</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">bookOptions</span> <span class="p">=</span> <span class="n">mementoImplementation</span><span class="p">.</span><span class="n">State</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Visualiza</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Estados:"</span><span class="p">);</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="n">OpcionBook</span> <span class="n">bookOption</span> <span class="k">in</span> <span class="n">bookOptions</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">bookOption</span><span class="p">.</span><span class="nf">Ver</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">OpcionBook</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="kt">string</span> <span class="n">_nombre</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;</span> <span class="n">BookOptionsNotSupported</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">protected</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">OpcionBook</span><span class="p">(</span><span class="kt">string</span> <span class="n">nombre</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BookOptionsNotSupported</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">OpcionBook</span><span class="p">&gt;();</span>
        <span class="n">_nombre</span> <span class="p">=</span> <span class="n">nombre</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AgregaOpcionIncompatible</span><span class="p">(</span><span class="n">OpcionBook</span> <span class="n">bookOptionIncompatible</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">BookOptionsNotSupported</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="n">bookOptionIncompatible</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">BookOptionsNotSupported</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">bookOptionIncompatible</span><span class="p">);</span>
            <span class="n">bookOptionIncompatible</span><span class="p">.</span><span class="nf">AgregaOpcionIncompatible</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Ver</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"opcion : </span><span class="p">{</span><span class="n">_nombre</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">IMemento</span> <span class="n">memento</span><span class="p">;</span>

    <span class="n">OpcionBook</span> <span class="n">op1</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpcionBook</span><span class="p">(</span><span class="s">"Tapa dura"</span><span class="p">);</span>
    <span class="n">OpcionBook</span> <span class="n">op2</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpcionBook</span><span class="p">(</span><span class="s">"Tapa Blanda"</span><span class="p">);</span>
    <span class="n">OpcionBook</span> <span class="n">op3</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpcionBook</span><span class="p">(</span><span class="s">"Tapa Encuadernado"</span><span class="p">);</span>

    <span class="n">op1</span><span class="p">.</span><span class="nf">AgregaOpcionIncompatible</span><span class="p">(</span><span class="n">op3</span><span class="p">);</span>
    <span class="n">op2</span><span class="p">.</span><span class="nf">AgregaOpcionIncompatible</span><span class="p">(</span><span class="n">op3</span><span class="p">);</span>

    <span class="n">CompraOpciones</span> <span class="n">compraOpciones</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CompraOpciones</span><span class="p">();</span>
    <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">AgregaOpciones</span><span class="p">(</span><span class="n">op1</span><span class="p">);</span>
    <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">AgregaOpciones</span><span class="p">(</span><span class="n">op2</span><span class="p">);</span>
    <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">Visualiza</span><span class="p">();</span>

    <span class="n">memento</span> <span class="p">=</span> <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">AgregaOpciones</span><span class="p">(</span><span class="n">op3</span><span class="p">);</span>
    <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">Visualiza</span><span class="p">();</span>
    <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">Anula</span><span class="p">(</span><span class="n">memento</span><span class="p">);</span>
    <span class="n">compraOpciones</span><span class="p">.</span><span class="nf">Visualiza</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Saludos.</p>

	</div>
</article>


          </main>
        </div>
        <div class="col-md-2 col-lg-2">
            <br/>
<br/>
<h5>Archivo </h5>



  
  
  <a href="/tag/Arquitectura"><code class="highligher-rouge">Arquitectura</code></a><br/>

  
  
  <a href="/tag/Azure"><code class="highligher-rouge">Azure</code></a><br/>

  
  
  <a href="/tag/MsIoT"><code class="highligher-rouge">MsIoT</code></a><br/>

  
  
  <a href="/tag/Git"><code class="highligher-rouge">Git</code></a><br/>

  
  
  <a href="/tag/Docker"><code class="highligher-rouge">Docker</code></a><br/>

  
  
  <a href="/tag/Conferences"><code class="highligher-rouge">Conferences</code></a><br/>


        </div>
        <div class="col-md-1 col-lg-1"></div>
      </div>
      <div class="row">
        <div class="col-md-12 pull-center">
		  <!-- Pagination links -->
      
      </div>
      </div>
    </div>
    <br/><br/><br/>
	    
	    <!-- Footer -->
	    <footer>
    <div class="row">
        <div class="col-md-1">
        </div>
        <div class="col-md-10 pull-center">
                <span>@2017 - JRRN</span>
        </div>
        <div class="col-md-1 pull-right">
                <a href="https://github.com/jrrn" target="_blank">
                    <img src="/img/icons/github_ico.jpg" title="Github" class="socialLinksfooter" style="height: 30px;" alt="Github Logo">
                </a>
                <a href="https://www.linkedin.com/in/josé-rafael-ramón-navarro-27710661/" target="_blank">
                    <img src="/img/icons/linkedin_ico.jpg" tilte="LinkedIn" class="socialLinksfooter" style="height: 30px;" alt="LinkedIn Logo">
                </a>
        </div>
    </div>

</footer>

<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,400italic%7CSignika:700,300,400,600' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
<link rel="stylesheet" href="/css/main.css">

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99774552-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-99774552-1');
</script>

	    <!-- Script -->
      <script src="/js/main.js"></script>	


  </div>
</body>
</html>

<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="generator" content="Jekyll">

	<title>Patrón Command</title>

	<!-- CSS & fonts -->
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,400italic%7CSignika:700,300,400,600' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="shortcut icon" href="img/icons/favicon.ico">
	<!-- RSS -->
	<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />
	
	





  	
</head>


<body>
	<div id="wrap">
	  	<!-- Navigation -->
	  	<nav id="nav">
	<div id="nav-list">
		<a href="/">Home</a>
		<!-- Nav pages -->
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	      <a href="/about" title="Sobre mí">Sobre mí</a>
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
    <!-- Nav links -->
	  <!-- <a href="https://github.com/KingFelix/emerald/archive/master.zip">Download</a>
<a href="https://github.com/KingFelix/emerald">Project on Github</a> -->



	</div>
  
  <!-- Nav footer -->
	
	  <span>version 1.0.0</span>





	

</nav>

    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>
      <!-- Header -->
        <header id="header">
	<div class="headerbackground"></div>
	<a href="/">
	  <h1>JRRN Coding!</h1>
	</a>
</header>

    <!-- Main content -->
	  <div id="container">
      <div class="row">
        <div class="col-md-2 col-lg-2"></div>
        <div class="col-md-7 col-lg-7">
          <main>
            <article id="post-page">
	<div>
		<h2>Patrón Command</h2><span>[
			
				
				<a href="/tag/Arquitectura"><code class="highligher-rouge"><nobr>Arquitectura<nobr></code>&nbsp;</a>
			
			]</span>	
	<time datetime="2018-01-23T00:00:00+01:00" class="by-line">23 Jan 2018</time>
	</div>
		
	<div class="content">
		<p>El patrón <strong>Command</strong> nos ayuda a transformar una solicitud en un objeto. Estas solicitudes tienen la propiedad de poder encolarse, ser borradas y actualizadas dentro de la cola de peticiones.</p>

<p>Volviendo a nuestro caso de libros, todos sabemos que ciertos libros en IT son altamente propensos a quedarse obsoletos, para ello, nuestra implementación de tienda, es capaz de emitir una rebaja para aquellos libros que no están teniendo la salida que queremos. Este proceso, se podría hacer manual con un campo de rebaja, pero queremos que sea el sistema el que emita esta rebaja según la premisa de que si no se vende rebájalo tantas veces como sea necesario hasta salir del stock.</p>

<p>Para ello, el patrón command nos ayudará a no tener que efectuar este proceso por cada uno de los libros del stock.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Book</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="kt">string</span> <span class="n">_nombre</span><span class="p">;</span>
    <span class="k">protected</span> <span class="n">DateTime</span> <span class="n">_fechaEntradaStock</span><span class="p">;</span>
    <span class="k">protected</span> <span class="kt">double</span> <span class="n">_precioVenta</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Book</span><span class="p">(</span><span class="kt">string</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">DateTime</span> <span class="n">fechaEntradaStock</span><span class="p">,</span> <span class="kt">double</span> <span class="n">precioVenta</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_nombre</span> <span class="p">=</span> <span class="n">nombre</span><span class="p">;</span>
        <span class="n">_fechaEntradaStock</span> <span class="p">=</span> <span class="n">fechaEntradaStock</span><span class="p">;</span>
        <span class="n">_precioVenta</span> <span class="p">=</span> <span class="n">precioVenta</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">long</span> <span class="nf">TiempoStock</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span> <span class="p">-</span> <span class="n">_fechaEntradaStock</span><span class="p">).</span><span class="n">Ticks</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">ActualizaPrecio</span><span class="p">(</span><span class="kt">double</span> <span class="n">descuento</span><span class="p">)</span><span class="err"> </span><span class="p">{</span>
            <span class="n">_precioVenta</span> <span class="p">=</span> <span class="m">0.01</span> <span class="p">*</span> <span class="n">Math</span><span class="p">.</span><span class="nf">Round</span><span class="p">(</span><span class="n">descuento</span><span class="p">)</span> <span class="p">*</span> <span class="n">_precioventa</span> <span class="p">*</span><span class="m">100</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Ver</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">nombre</span><span class="p">}</span><span class="s"> tiene un precio </span><span class="p">{</span><span class="n">_precioVenta</span><span class="p">}</span><span class="s"> entrada </span><span class="p">{</span><span class="n">_fechaEntradaStock</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">AplicarRebaja</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;</span> <span class="n">_stockLibros</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;();</span>
    <span class="k">protected</span> <span class="kt">long</span> <span class="n">_hoy</span><span class="p">;</span>
    <span class="k">protected</span> <span class="kt">long</span> <span class="n">_tiempoStock</span><span class="p">;</span>
    <span class="k">protected</span> <span class="kt">double</span> <span class="n">_descuento</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">AplicarRebaja</span><span class="p">(</span><span class="kt">long</span> <span class="n">tiempoStock</span><span class="p">,</span> <span class="kt">double</span> <span class="n">descuento</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_hoy</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">Ticks</span><span class="p">;</span>
        <span class="n">_tiempoStock</span> <span class="p">=</span> <span class="n">tiempoStock</span><span class="p">;</span>
        <span class="n">_descuento</span> <span class="p">=</span> <span class="n">descuento</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Rebajar</span><span class="p">(</span><span class="n">IList</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;</span> <span class="n">Libros</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_stockLibros</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
        <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">libro</span> <span class="k">in</span> <span class="n">Libros</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">libro</span><span class="p">.</span><span class="nf">TiempoStock</span><span class="p">())</span> <span class="p">&gt;=</span> <span class="n">_tiempoStock</span><span class="p">{</span>
                <span class="n">_stockLibros</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">libro</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">libroARebajar</span> <span class="k">in</span> <span class="n">_stockLibros</span><span class="p">){</span>
            <span class="n">libroARebajar</span><span class="p">.</span><span class="nf">ActualizaPrecio</span><span class="p">(</span><span class="m">1.0</span> <span class="p">-</span> <span class="n">descuento</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Anular</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">libro</span> <span class="k">in</span> <span class="n">_stockLibros</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">libro</span><span class="p">.</span><span class="nf">ActualizaPrecio</span><span class="p">(</span><span class="m">1.0</span> <span class="p">/</span> <span class="p">(</span><span class="m">1.0</span> <span class="p">-</span> <span class="n">descuento</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Restablecer</span><span class="p">(){</span>
        <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">libro</span> <span class="k">in</span> <span class="n">_stockLibros</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">libro</span><span class="p">.</span><span class="nf">ActualizaPrecio</span><span class="p">(</span><span class="m">1.0</span> <span class="p">-</span> <span class="n">descuento</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Catalogo</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;</span> <span class="n">_stockLibros</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;();</span>
    <span class="k">protected</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">AplicarRebaja</span><span class="p">&gt;</span> <span class="n">commands</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">AplicarRebaja</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">commandRebaja</span><span class="p">(</span><span class="n">AplicarRebaja</span> <span class="n">aplicarRebaja</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">commands</span><span class="p">.</span><span class="nf">Insert</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">aplicarRebaja</span><span class="p">);</span>
        <span class="n">aplicarRebaja</span><span class="p">.</span><span class="nf">Rebajar</span><span class="p">(</span><span class="n">_stockLibros</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">commandAnulaRebaja</span><span class="p">(</span><span class="kt">int</span> <span class="n">commandNum</span><span class="p">){</span>
        <span class="n">commands</span><span class="p">[</span><span class="n">commandNum</span><span class="p">].</span><span class="nf">Anular</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">restablecerSolicitudRebaja</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">commands</span><span class="p">[</span><span class="n">commandNum</span><span class="p">].</span><span class="nf">Restablecer</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">agrega</span><span class="p">(</span><span class="n">Book</span> <span class="n">libro</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_stockLibros</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">libro</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">visualiza</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">Book</span> <span class="n">libro</span> <span class="k">in</span> <span class="n">_stockLibros</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">libro</span><span class="p">.</span><span class="nf">Ver</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

	</div>
</article>


          </main>
        </div>
        <div class="col-md-2 col-lg-2">
            <br/>
<br/>
<h5>Archivo </h5>



  
  
  <a href="/tag/Arquitectura"><code class="highligher-rouge">Arquitectura</code></a><br/>

  
  
  <a href="/tag/MsIoT"><code class="highligher-rouge">MsIoT</code></a><br/>

  
  
  <a href="/tag/Git"><code class="highligher-rouge">Git</code></a><br/>

  
  
  <a href="/tag/Docker"><code class="highligher-rouge">Docker</code></a><br/>

  
  
  <a href="/tag/Azure"><code class="highligher-rouge">Azure</code></a><br/>


        </div>
        <div class="col-md-1 col-lg-1"></div>
      </div>
      <div class="row">
        <div class="col-md-12 pull-center">
		  <!-- Pagination links -->
      
      </div>
      </div>
    </div>
    <br/><br/><br/>
	    
	    <!-- Footer -->
	    <footer>
    <div class="row">
        <div class="col-md-1">
        </div>
        <div class="col-md-10 pull-center">
                <span>@2017 - JRRN</span>
        </div>
        <div class="col-md-1 pull-right">
                <a href="https://github.com/jrrn" target="_blank">
                    <img src="/img/icons/github_ico.jpg" class="socialLinksfooter" style="height: 30px;" alt="Github Logo">
                </a>
                <a href="https://www.linkedin.com/in/josé-rafael-ramón-navarro-27710661/" target="_blank">
                    <img src="/img/icons/linkedin_ico.jpg" class="socialLinksfooter" style="height: 30px;" alt="LinkedIn Logo">
                </a>
        </div>
    </div>

</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99774552-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-99774552-1');
</script>

	    <!-- Script -->
      <script src="/js/main.js"></script>	


  </div>
</body>
</html>
